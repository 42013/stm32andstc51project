C51 COMPILER V9.54   BEEP                                                                  03/27/2023 18:34:40 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BEEP
OBJECT MODULE PLACED IN .\Objects\BEEP.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE BEEP.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\BEEP.l
                    -st) TABS(2) OBJECT(.\Objects\BEEP.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <intrins.h>
   3            sfr AUXR = 0x8E;
   4            sbit beep=P2^5;
   5            sbit k1=P3^1;
   6            sbit k2=P3^0;
   7            sbit k3=P3^2;
   8            sbit LSA=P2^2;
   9            sbit LSB=P2^3;
  10            sbit LSC=P2^4;
  11            typedef unsigned u16;
  12            unsigned char RxdByte;
  13            unsigned char receiveData;
  14          
  15          
  16          void ConfigUART(u16 baud)
  17            {
  18   1          SCON=0x50;
  19   1          TMOD&=0x0F;
  20   1          TMOD|=0x20;
  21   1          TH1=256 -(11059200/12/32)/baud; 
  22   1          TL1=TH1;
  23   1          ET1=0;
  24   1          ES=1;
  25   1          TR1=1;
  26   1        }
  27            
  28          
  29          void sendByte(char data_msg)
  30            {
  31   1            SBUF = data_msg;
  32   1            while(!TI);
  33   1            TI = 0; 
  34   1        }
  35           
  36          void sendString(char* str)
  37          {
  38   1        while( *str != '\0')
  39   1          {
  40   2            sendByte(*str);
  41   2            str++;
  42   2          }
  43   1      }
  44           
  45          void delay(unsigned int t)
  46          {
  47   1          while(t--);
  48   1      }
  49          
  50          void Buzzer_Delay()  //@12.000MHz
  51          {
  52   1       unsigned char i;
  53   1        _nop_  ();
  54   1       i = 80;
C51 COMPILER V9.54   BEEP                                                                  03/27/2023 18:34:40 PAGE 2   

  55   1       while (--i);
  56   1      }
  57          void beep_one()
  58          {
  59   1          unsigned  int ms=1000,i;
  60   1          for(i=0;i<ms*0.1;i++)
  61   1         {
  62   2         beep=!beep;
  63   2         Buzzer_Delay();
  64   2         }
  65   1      }
  66          
  67          void beep_two()
  68          {
  69   1            int j = 7;
  70   1            beep=0;
  71   1            while(j--)
  72   1            {
  73   2                  beep=~beep;
  74   2                  delay(1000);
  75   2            }
  76   1      }
  77          
  78          void main()
  79          {
  80   1        while(1){
  81   2          delay(1000);
  82   2          EA = 1;
  83   2          ConfigUART(9600);
  84   2          while(1)
  85   2          {
  86   3            if(k1==0)
  87   3            {
  88   4                  while(k1==0);
  89   4                  delay(10);
  90   4                  beep_one();
  91   4                  sendString("a\r\n");
  92   4            }
  93   3            else if(k2==0)
  94   3            {
  95   4                  while(k2==0);
  96   4                  delay(10);
  97   4                  beep_two();
  98   4                  sendString("b\r\n");
  99   4            }
 100   3                }
 101   2              }
 102   1            }
 103          
 104            /*if(k1==1){
 105                delay(10);
 106                RxdByte='c';
 107                beepchoice();
 108              }else if(k1==0){
 109                delay(10);
 110                RxdByte='a';
 111                beepchoice();
 112              }else if(k2==1){
 113                delay(10);
 114                RxdByte='d';
 115                beepchoice();
 116              }else if(k2==0){
C51 COMPILER V9.54   BEEP                                                                  03/27/2023 18:34:40 PAGE 3   

 117                delay(10);
 118                RxdByte='b';
 119                beepchoice();
 120              }*/
 121            /*switch(RxdByte)
 122                    {
 123                      case 'a':beep_one();break;
 124                      case 'b':beep_two();break;
 125                    }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    265    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
