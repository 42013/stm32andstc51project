C51 COMPILER V9.54   PROGERM                                                               03/18/2023 18:10:42 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE PROGERM
OBJECT MODULE PLACED IN .\Objects\progerm.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE progerm.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\pro
                    -germ.lst) TABS(2) OBJECT(.\Objects\progerm.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <intrins.h>
   3          typedef unsigned int uint  ;
   4          typedef unsigned char uchar ;
   5          sbit BEEP = P3^0 ;
   6          sbit Trig=P1^1;
   7          sbit Echo=P1^0;
   8          sbit k1=P3^7;
   9          unsigned int distance,number1,number2,number3;
  10          float time;
  11          void Time0Init()
  12          {
  13   1        TMOD |= 0x01;   
  14   1        TL0 = 0x00;   
  15   1        TH0 = 0x00; 
  16   1        TR0 = 0;  
  17   1      }
  18          
  19          //void delay(uint i){
  20          //   while(i--){
  21          //   }
  22          //}
  23          
  24          void ultrasonicwave_init(void)
  25          {
  26   1        Trig=0;
  27   1        Echo=1;
  28   1        Time0Init();
  29   1      } 
  30          void delay(unsigned int xms)    //@12.000MHz
  31          { 
  32   1        unsigned char i;
  33   1        while(xms--)
  34   1        {
  35   2        _nop_();
  36   2        i = 2;
  37   2        while (--i);
  38   2        }
  39   1      }
  40          
  41          void startHC()
  42          {
  43   1          Trig=1; 
  44   1          delay(2);
  45   1          Trig=0;  
  46   1      }
  47          void Buzzer_Delay()  //@12.000MHz
  48          {
  49   1       unsigned char i;
  50   1        _nop_  ();
  51   1       i = 80;
  52   1       while (--i);
  53   1      }
  54          void zong()
C51 COMPILER V9.54   PROGERM                                                               03/18/2023 18:10:42 PAGE 2   

  55          {
  56   1           Time0Init();
  57   1           startHC();
  58   1          time = (TH0 * 256 + TL0)*1.085;
  59   1          distance = time * 0.017;
  60   1          number1=distance/100%10;
  61   1          number2=distance/10%10;
  62   1          number3=distance/1%10;
  63   1        if(distance<=100){
  64   2          uint ms=1000,i;
  65   2          for(i=0;i<ms*0.3;i++)
  66   2         {
  67   3         BEEP=!BEEP;
  68   3         Buzzer_Delay();
  69   3         }
  70   2       }else{
  71   2             BEEP=1;
  72   2             delay(100);
  73   2             BEEP=0;
  74   2             delay(100);
  75   2        }
  76   1       }
  77          unsigned char Nixietable[10]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F};
  78          
  79          void Nixie(unsigned char location,unsigned char number){
  80   1        switch(location){
  81   2          case 1:P2_0=1;P2_1=1;P2_2=1; break;
  82   2          case 2:P2_0=1;P2_1=1;P2_2=0; break;
  83   2          case 3:P2_0=1;P2_1=0;P2_2=1; break;
  84   2          case 4:P2_0=1;P2_1=0;P2_2=0; break;
  85   2          case 5:P2_0=0;P2_1=1;P2_2=1; break;
  86   2          case 6:P2_0=0;P2_1=1;P2_2=0; break;
  87   2          case 7:P2_0=0;P2_1=0;P2_2=1; break;
  88   2          case 8:P2_0=0;P2_1=0;P2_2=0; break;
  89   2        }
  90   1        P0=Nixietable[number];
  91   1        delay(1);
  92   1        P0=0x00;
  93   1      }
  94          
  95          
  96          void main(){
  97   1          ultrasonicwave_init();//启动并计时
  98   1      while(1)
  99   1           {
 100   2           zong();
 101   2           Nixie(2, number1);
 102   2           delay(1);
 103   2           Nixie(3, number2);
 104   2           delay(1);
 105   2           Nixie(4, number3);
 106   2           delay(1);
 107   2            Nixie(1, 0);
 108   2           delay(1);
 109   2       if(k1==0)
 110   2         {
 111   3           delay(1);
 112   3           if(k1==0)
 113   3           {
 114   4            delay(1);
 115   4            if(k1==1)
 116   4            {
C51 COMPILER V9.54   PROGERM                                                               03/18/2023 18:10:42 PAGE 3   

 117   5              delay(1);
 118   5            }
 119   4          }
 120   3          while(!k1);//dm
 121   3          while(1)
 122   3           {
 123   4          zong();
 124   4             Nixie(1, 0);
 125   4           delay(1);
 126   4             Nixie(2, 0);
 127   4           delay(1);
 128   4          Nixie(3, number1);
 129   4          delay(1);
 130   4          Nixie(4, number2);
 131   4          delay(1);
 132   4          }
 133   3        }
 134   2          }
 135   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    486    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
