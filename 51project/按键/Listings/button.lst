C51 COMPILER V9.54   BUTTON                                                                04/26/2023 10:13:36 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BUTTON
OBJECT MODULE PLACED IN .\Objects\button.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE button.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\butt
                    -on.lst) OBJECT(.\Objects\button.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <intrins.h>
   3                  sbit k1=P2^1;
   4                  sbit k2=P2^2;
   5                  sbit k3=P2^3;
   6                  sbit k4=P2^4;
   7                  sbit k5=P2^5;
   8                  sbit k6=P2^6;
   9                  sbit k7=P2^7;
  10                  unsigned char RxdByte;
  11                  unsigned char receiveData;
  12          
  13          /*void Uart_Init(void)          //9600bps@12.000MHz
  14          {
  15                  SCON = 0x50;            //8位数据,可变波特率
  16                  //AUXR &= 0xBF;         //定时器1时钟为Fosc/12,即12T
  17                  //AUXR &= 0xFE;         //串口1选择定时器1为波特率发生器
  18                  TMOD &= 0x0F;           //设定定时器1为16位自动重装方式
  19                  TL1 = 0xE6;             //设定定时初值
  20                  TH1 = 0xFF;             //设定定时初值
  21                  ET1 = 0;                //禁止定时器1中断
  22                  TR1 = 1;                //启动定时器1
  23          }*/
  24          
  25                  void Uart_Init()
  26          {
  27   1               PCON=0x00;
  28   1               SCON=0x50;
  29   1               TMOD |= 0x20;
  30   1               TL1 = 0xFD;
  31   1               TH1 = 0xFD;
  32   1              //TL1 = 0xD9;           //设定定时初值
  33   1              //TH1 = 0xD9;           //设定定时器重装值
  34   1                      ET1=0;
  35   1               TR1 = 1;
  36   1               EA = 1;
  37   1               ES = 1;   
  38   1      }
  39          
  40          void sendByte(char data_msg)
  41                  {
  42   1                              SBUF = data_msg;
  43   1                              while(!TI);
  44   1                              TI = 0; 
  45   1              }
  46           
  47          /*void sendString(char* str)
  48          {
  49                  while( *str != '\0')
  50                          {
  51                                  sendByte(*str);
  52                                  str++;
  53                          }
  54          }*/
C51 COMPILER V9.54   BUTTON                                                                04/26/2023 10:13:36 PAGE 2   

  55           
  56          void delay(unsigned int t)
  57          {
  58   1                      while(t--);
  59   1      }
  60                  /*void Delay100ms()             //@12.000MHz
  61          {
  62                  unsigned char i, j, k;
  63          
  64                  _nop_();
  65                  _nop_();
  66                  i = 5;
  67                  j = 144;
  68                  k = 71;
  69                  do
  70                  {
  71                          do
  72                          {
  73                                  while (--k);
  74                          } while (--j);
  75                  } while (--i);
  76          }*/
  77          /*void delay1s()   //误差 0us
  78          {
  79              unsigned char a,b,c;
  80              for(c=167;c>0;c--)
  81                  for(b=171;b>0;b--)
  82                      for(a=16;a>0;a--);
  83              _nop_();  //if Keil,require use intrins.h
  84          }*/
  85          void main()
  86          {
  87   1              while(1){
  88   2                      Uart_Init();    
  89   2                      while(1)  
  90   2                      {       
  91   3                              if(k1==0)
  92   3                              {
  93   4                                                      while(k1 ==0);
  94   4                                                      delay(50);
  95   4                                                      //sendString("7");
  96   4                                                      sendByte(1);
  97   4                              }
  98   3                              if(k2==0)
  99   3                              {
 100   4                                                      while(k2==0);
 101   4                                                      delay(50);
 102   4              //                                      sendString("2");
 103   4                                      sendByte(2);
 104   4                              }
 105   3                              if(k3==0)
 106   3                              {
 107   4                                                      while(k3==0);
 108   4                                                      delay(50);
 109   4                                                      //sendString("3");
 110   4                                      sendByte(3);
 111   4                              }
 112   3                              if(k4==0)
 113   3                              {
 114   4                                                      while(k4==0);
 115   4                                                      delay(50);
 116   4                                                      //sendString("4");
C51 COMPILER V9.54   BUTTON                                                                04/26/2023 10:13:36 PAGE 3   

 117   4                                                      sendByte(4);
 118   4                              }
 119   3                              if(k5==0)
 120   3                              {
 121   4                                                      while(k5==0);
 122   4                                                      delay(100);
 123   4                                                      //sendString("5");
 124   4                                                              sendByte(5);
 125   4                              }
 126   3                              if(k6==0)
 127   3                              {
 128   4                                                      while(k6==0);
 129   4                                                      delay(100);
 130   4                                                      //sendString("6");
 131   4                                                      sendByte(6);
 132   4                              }
 133   3                              if(k7==0)
 134   3                              {
 135   4                                                      while(k7==0)
 136   4                                                      delay(50);
 137   4                                                      //sendString("7");
 138   4                                                      sendByte(7);
 139   4                              }
 140   3                              
 141   3                      /*if(k1==0)
 142   3                              while(k1==0)
 143   3                              Delay100ms();
 144   3                              {                       
 145   3                                      if(k4==0&&k3==1)
 146   3                                                              {
 147   3                                                                      while(k4==0&&k3==1)
 148   3                                                                      Delay100ms();   
 149   3                                                      //sendString("9");
 150   3                                                                      sendByte(9);
 151   3                                                              }else if(k4==1&&k3==0){
 152   3                                                              while(k4==1&&k3==0)     
 153   3                                                              Delay100ms();   
 154   3                                                      //sendString("8");
 155   3                                                                      sendByte(8);
 156   3                                                      }else if(k4==1&&k3==1){
 157   3                                                              while(k4==1&&k3==1)
 158   3                                                              Delay100ms();   
 159   3                                                      //sendString("1");
 160   3                                                              sendByte(1);
 161   3                                      }       
 162   3                              }*/
 163   3                              
 164   3                      }                               
 165   2                                              }
 166   1                                      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    161    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
