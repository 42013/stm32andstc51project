C51 COMPILER V9.54   LAN                                                                   03/25/2023 18:46:49 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LAN
OBJECT MODULE PLACED IN .\Objects\LAN.obj
COMPILER INVOKED BY: D:\keil5\C51\BIN\C51.EXE LAN.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\LAN.lst
                    -) TABS(2) OBJECT(.\Objects\LAN.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <intrins.h>
   3            sfr AUXR = 0x8E;
   4            sbit beep=P2^5;
   5            sbit k1=P3^1;
   6            sbit k2=P3^0;
   7            sbit k3=P3^2;
   8            sbit LSA=P2^2;
   9            sbit LSB=P2^3;
  10            sbit LSC=P2^4;
  11            typedef unsigned u16;
  12            unsigned char RxdByte;
  13            unsigned char receiveData;
  14          
  15          
  16          void ConfigUART(u16 baud)
  17            {
  18   1          SCON=0x50;
  19   1          TMOD&=0x0F;
  20   1          TMOD|=0x20;
  21   1          TH1=256 -(11059200/12/32)/baud; 
  22   1          TL1=TH1;
  23   1          ET1=0;
  24   1          ES=1;
  25   1          TR1=1;
  26   1        }
  27            
  28          /*void UartInit(void) 
  29          {
  30            AUXR = 0x01;
  31            SCON = 0x40; 
  32            TMOD &= 0xF0;
  33            TMOD |= 0x20;
  34            TH1 = 0xFD;
  35            TL1 = 0xFD;
  36            TR1 = 1;
  37            ET1=0;
  38            EA=1;
  39            ES=1;
  40          }*/
  41          
  42          void sendByte(char data_msg)
  43            {
  44   1            SBUF = data_msg;
  45   1            while(!TI);
  46   1            TI = 0;
  47   1        }
  48           
  49          void sendString(char* str)
  50          {
  51   1        while( *str != '\0')
  52   1          {
  53   2            sendByte(*str);
  54   2            str++;
C51 COMPILER V9.54   LAN                                                                   03/25/2023 18:46:49 PAGE 2   

  55   2          }
  56   1      }
  57           
  58          void delay(unsigned int t)
  59          {
  60   1          while(t--);
  61   1      }
  62          
  63          void Buzzer_Delay()  //@12.000MHz
  64          {
  65   1       unsigned char i;
  66   1        _nop_  ();
  67   1       i = 80;
  68   1       while (--i);
  69   1      }
  70          void beep_one()
  71          {
  72   1          unsigned  int ms=1000,i;
  73   1          for(i=0;i<ms*0.1;i++)
  74   1         {
  75   2         beep=!beep;
  76   2         Buzzer_Delay();
  77   2         }
  78   1      }
  79          
  80          void beep_two()
  81          {
  82   1            int j = 7;
  83   1            beep=0;
  84   1            while(j--)
  85   1            {
  86   2                  beep=~beep;
  87   2                  delay(1000);
  88   2            }
  89   1      }
  90          void key()
  91          {
  92   1            if(k1==0)
  93   1            {
  94   2                  while(k1==0);
  95   2                  delay(10);
  96   2                  beep_one();
  97   2                  sendString("voice one\r\n");
  98   2            }
  99   1            else if(k2==0)
 100   1            {
 101   2                  while(k2==0);
 102   2                  delay(10);
 103   2                  beep_two();
 104   2                  sendString("v\r\n");
 105   2            }
 106   1      }
 107          void main()
 108          {
 109   1        //UartInit();
 110   1        while(1){
 111   2          delay(1000);
 112   2          EA = 1;
 113   2          ConfigUART(9600);
 114   2          while(1)
 115   2          {
 116   3                key();
C51 COMPILER V9.54   LAN                                                                   03/25/2023 18:46:49 PAGE 3   

 117   3                }
 118   2              }
 119   1            }
 120          void InterruptUART() interrupt 4
 121            {
 122   1            if(RI)
 123   1                {
 124   2                      RI=0;
 125   2                      RxdByte=SBUF;
 126   2                      SBUF=RxdByte;
 127   2                }
 128   1            if(TI)
 129   1                {
 130   2                      TI=0;
 131   2                }
 132   1        }
 133            /*if(k1==1){
 134                delay(10);
 135                RxdByte='c';
 136                beepchoice();
 137              }else if(k1==0){
 138                delay(10);
 139                RxdByte='a';
 140                beepchoice();
 141              }else if(k2==1){
 142                delay(10);
 143                RxdByte='d';
 144                beepchoice();
 145              }else if(k2==0){
 146                delay(10);
 147                RxdByte='b';
 148                beepchoice();
 149              }*/
 150            /*switch(RxdByte)
 151                    {
 152                      case 'a':beep_one();break;
 153                      case 'b':beep_two();break;
 154                    }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    283    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
